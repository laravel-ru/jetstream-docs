(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{373:function(t,s,a){"use strict";a.r(s);var e=a(40),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"команды"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#команды"}},[t._v("#")]),t._v(" Команды")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#вступление"}},[t._v("Вступление")])]),a("li",[a("a",{attrs:{href:"#создание-команды"}},[t._v("Создание команды")]),a("ul",[a("li",[a("a",{attrs:{href:"#деиствия"}},[t._v("Действия")])]),a("li",[a("a",{attrs:{href:"#представления-страницы"}},[t._v("Представления / Страницы")])])])]),a("li",[a("a",{attrs:{href:"#проверка-пользовательских-команд"}},[t._v("Проверка пользовательских команд")]),a("ul",[a("li",[a("a",{attrs:{href:"#текущая-команда"}},[t._v("Текущая команда")])]),a("li",[a("a",{attrs:{href:"#объект-команды"}},[t._v("Объект команды")])])])]),a("li",[a("a",{attrs:{href:"#управление-участниками"}},[t._v("Управление участниками")]),a("ul",[a("li",[a("a",{attrs:{href:"#деиствия-управления-участниками"}},[t._v("Действия управления участниками")])]),a("li",[a("a",{attrs:{href:"#управление-участниками-представления-страницы"}},[t._v("Управление участниками Представления / Страницы")])]),a("li",[a("a",{attrs:{href:"#приглашения"}},[t._v("Приглашения")])])])]),a("li",[a("a",{attrs:{href:"#роли-разрешения"}},[t._v("Роли / Разрешения")]),a("ul",[a("li",[a("a",{attrs:{href:"#авторизация"}},[t._v("Авторизация")])]),a("li",[a("a",{attrs:{href:"#объединение-разрешении-группы-с-разрешениями-api"}},[t._v("Объединение разрешений группы с разрешениями API")])])])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"вступление"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#вступление"}},[t._v("#")]),t._v(" Вступление")]),t._v(" "),a("p",[t._v("Если Вы установили Jetstream с помощью параметра "),a("code",[t._v("--teams")]),t._v(", Ваше приложение будет построено для поддержки создания команды и управления ею.")]),t._v(" "),a("p",[t._v("Командные функции Jetstream позволяют каждому зарегистрированному пользователю создавать несколько команд и входить в них. По умолчанию каждый зарегистрированный пользователь будет входить в «Персональную» команду. Например, если пользователь с именем «Салли Джонс» создает новую учетную запись, он будет назначен в команду с именем «Команда Салли». После регистрации пользователь может переименовать эту команду или создать дополнительные команды.")]),t._v(" "),a("p",[t._v("! "),a("a",{attrs:{href:"./../../assets/img/teams.png"}},[t._v("Скриншот команд Laravel")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Jetstream Команды")]),t._v(" "),a("p",[t._v("Подмостки и мнения команды Jetstream могут работать не для всех приложений. Если это не работает для Вашего варианта использования, не стесняйтесь создавать приложение Jetstream, не основанное на команде, и вручную добавлять функциональные возможности группы в свое приложение на основе Ваших собственных потребностей.")])]),t._v(" "),a("h2",{attrs:{id:"создание-команды"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#создание-команды"}},[t._v("#")]),t._v(" Создание команды")]),t._v(" "),a("p",[t._v("Доступ к представлению создания команды осуществляется через раскрывающееся меню навигации пользователя в правом верхнем углу.")]),t._v(" "),a("h3",{attrs:{id:"деиствия"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#деиствия"}},[t._v("#")]),t._v(" Действия")]),t._v(" "),a("p",[t._v("Как и многие другие функции Jetstream, логику создания и удаления команды можно настроить, изменив соответствующие классы действий в каталоге "),a("code",[t._v("app/Actions/Jetstream")]),t._v(". Эти действия включают "),a("code",[t._v("CreateTeam")]),t._v(", "),a("code",[t._v("UpdateTeamName")]),t._v(" и "),a("code",[t._v("DeleteTeam")]),t._v(". Каждое из этих действий вызывается, когда соответствующая задача выполняется пользователем в пользовательском интерфейсе приложения. Вы можете изменять эти действия по мере необходимости в зависимости от потребностей Вашего приложения.")]),t._v(" "),a("h3",{attrs:{id:"представления-страницы"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#представления-страницы"}},[t._v("#")]),t._v(" Представления / Страницы")]),t._v(" "),a("p",[t._v("При использовании стека Livewire представление создания команды отображается с использованием шаблона Blade "),a("code",[t._v("resources/views/teams/create-team-form.blade.php")]),t._v(". При использовании стека инерции это представление отображается с использованием шаблона "),a("code",[t._v("resources/js/Pages/Teams/CreateTeamForm.vue")]),t._v(". Дополнительные поля ввода, которые указаны в формах создания группы, будут предоставлены классу действия "),a("code",[t._v("App\\Actions\\Jetstream\\CreateTeam")]),t._v(", когда пользователь создаст команду.")]),t._v(" "),a("h2",{attrs:{id:"проверка-пользовательских-команд"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#проверка-пользовательских-команд"}},[t._v("#")]),t._v(" Проверка пользовательских команд")]),t._v(" "),a("p",[t._v("Доступ к информации о командах пользователя можно получить с помощью методов, предоставляемых трейтом "),a("code",[t._v("Laravel\\Jetstream\\HasTeams")]),t._v(". Этот трейт автоматически применяется к модели Вашего приложения "),a("code",[t._v("App\\Models\\User")]),t._v(" во время установки Jetstream. Этот трейт предоставляет множество полезных методов, которые позволяют Вам проверять команды пользователя:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ к выбранной в данный момент команде пользователя...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("currentTeam")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Laravel\\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Jetstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Team")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ ко всем командам (включая собственные команды), к которым принадлежит пользователь...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allTeams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ ко всем командам, принадлежащим пользователю...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("ownedTeams")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Eloquent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ ко всем командам, к которым пользователь принадлежит, но не владелец...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("teams")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Eloquent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Доступ к "личной" команде пользователя...')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("personalTeam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Laravel\\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Jetstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Team")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определение, владеет ли пользователь данной командой...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ownsTeam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определение принадлежности пользователя к определенной команды...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("belongsToTeam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Получение роли, назначенной пользователю в команде...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("teamRole")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Jetstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Role")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определение наличия у пользователя данной роли в данной команде...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTeamRole")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ к массиву всех разрешений, имеющихся у пользователя для данной команде...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("teamPermissions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определение, имеет ли пользователь данное разрешение рабочей команды...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTeamPermission")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:create'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n")])])]),a("h3",{attrs:{id:"текущая-команда"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#текущая-команда"}},[t._v("#")]),t._v(" Текущая команда")]),t._v(" "),a("p",[t._v("У каждого пользователя в приложении Jetstream есть «текущая команда». Это команда, для которой пользователь активно просматривает ресурсы. Например, если Вы создаете приложение-календарь, Ваше приложение будет отображать предстоящие события календаря для текущей команды пользователя.")]),t._v(" "),a("p",[t._v("Вы можете получить доступ к текущей команде пользователя, используя отношение "),a("code",[t._v("$user->currentTeam")]),t._v(". Это отношение может использоваться для определения области других Ваших запросов Eloquent текущей командой пользователя:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Calendar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Calendar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'team_id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("currentTeam")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("id")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Смена команд")]),t._v(" "),a("p",[t._v("Пользователь может переключить свою текущую команду через меню «Переключатель команд», доступное на панели навигации Jetstream.")])]),t._v(" "),a("h3",{attrs:{id:"объект-команды"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#объект-команды"}},[t._v("#")]),t._v(" Объект команды")]),t._v(" "),a("p",[t._v("Объект группы, доступ к которому осуществляется через "),a("code",[t._v("$user->currentTeam")]),t._v(" или запросы Eloquent, связанные с другой командой Jetstream, предоставляет множество полезных методов для проверки атрибутов и взаимосвязей команды:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ к владельцу команды...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("owner")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" App\\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("User")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Получить всех пользователей команды, включая владельца...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Eloquent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Получить всех пользователей команды, исключая владельца...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("users")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Eloquent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определение, является ли данный пользователь членом команды...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определение, есть ли в команде участник с данным адресом электронной почты...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasUserWithEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$emailAddress")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определение, является ли данный пользователь членом команды с данным разрешением...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("userHasPermission")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$permission")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n")])])]),a("h2",{attrs:{id:"управление-участниками"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#управление-участниками"}},[t._v("#")]),t._v(" Управление участниками")]),t._v(" "),a("p",[t._v("Члены команды могут быть добавлены и удалены из команды через представление «Настройки команды» Jetstream.")]),t._v(" "),a("h3",{attrs:{id:"деиствия-управления-участниками"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#деиствия-управления-участниками"}},[t._v("#")]),t._v(" Действия управления участниками")]),t._v(" "),a("p",[t._v("Подобно процессу настройки других функций Jetstream, логика добавления членов группы может быть настроена путем изменения класса действия "),a("code",[t._v("App\\Actions\\Jetstream\\AddTeamMember")]),t._v(". Метод класса' "),a("code",[t._v("add")]),t._v(" вызывается с текущим аутентифицированным пользователем, экземпляром "),a("code",[t._v("Laravel\\Jetstream\\Team")]),t._v(", адресом электронной почты пользователя, добавляемого в команду, и ролью (если применимо) пользователя, добавляемого в команду.")]),t._v(" "),a("p",[t._v("Это действие отвечает за проверку того, что пользователь действительно может быть добавлен в команду, а затем за добавление пользователя в команду. Вы можете настроить это действие в соответствии с потребностями Вашего конкретного приложения.")]),t._v(" "),a("p",[t._v("Удаление члена группы можно настроить, изменив класс действия "),a("code",[t._v("App\\Actions\\Jetstream\\RemoveTeamMember")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"управление-участниками-представления-страницы"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#управление-участниками-представления-страницы"}},[t._v("#")]),t._v(" Управление участниками Представления / Страницы")]),t._v(" "),a("p",[t._v("При использовании стека Livewire представление менеджера членов команды отображается с использованием блейд-шаблона "),a("code",[t._v("resources/views/teams/team-member-manager.blade.php")]),t._v(". При использовании стека Inertia это представление отображается с использованием шаблона "),a("code",[t._v("resources/js/Pages/Teams/TeamMemberManager.vue")]),t._v(". Как правило, эти шаблоны не требуют настройки.")]),t._v(" "),a("h3",{attrs:{id:"приглашения"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#приглашения"}},[t._v("#")]),t._v(" Приглашения")]),t._v(" "),a("p",[t._v("По умолчанию Jetstream просто добавит любого существующего пользователя приложения, указанного Вами, в Вашу группу. Однако многие приложения отправляют приглашения по электронной почте пользователям, приглашенным в команды. Если у пользователя нет учетной записи, электронное письмо с приглашением может предложить ему создать учетную запись и принять приглашение. Или, если у пользователя уже есть учетная запись, он может принять или проигнорировать приглашение.")]),t._v(" "),a("p",[t._v("К счастью, Jetstream позволяет включать приглашения членов команды для Вашего приложения с помощью всего нескольких строк кода. Для начала передайте опцию "),a("code",[t._v("invitations")]),t._v(" при включении функции «команды» для Вашего приложения. Это можно сделать, изменив массив "),a("code",[t._v("features")]),t._v(" в файле конфигурации "),a("code",[t._v("config/jetstream.php")]),t._v(" Вашего приложения:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Jetstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Features")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'features'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    Features"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("termsAndPrivacyPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Features"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("profilePhotos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Features"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("api")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Features"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("teams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'invitations'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Features"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("accountDeletion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("После того, как Вы включили функцию приглашений Jetstream, пользователи, приглашенные в команды, получат электронное письмо с приглашением со ссылкой для принятия приглашения в команду. Пользователи не будут полноправными членами команды, пока приглашение не будет принято.")]),t._v(" "),a("h4",{attrs:{id:"деиствия-приглашение"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#деиствия-приглашение"}},[t._v("#")]),t._v(" Действия приглашение")]),t._v(" "),a("p",[t._v("Когда пользователя приглашают в группу, действие Вашего приложения "),a("code",[t._v("App\\Actions\\Jetstream\\InviteTeamMember")]),t._v(" будет вызываться с текущим аутентифицированным пользователем, командой, в которую приглашен новый пользователь, адресом электронной почты приглашенного пользователя и, необязательно, роль, которая должна быть назначена пользователю после присоединения к команде. Вы можете просмотреть это действие или изменить его в зависимости от потребностей Вашего собственного приложения.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Laravel Mail")]),t._v(" "),a("p",[t._v("Перед использованием функции приглашения в команду Вы должны убедиться, что Ваше приложение Laravel настроено для "),a("a",{attrs:{href:"https://getlaravel.ru/docs/mail",target:"_blank",rel:"noopener noreferrer"}},[t._v("отправки электронных писем"),a("OutboundLink")],1),t._v(". В противном случае Laravel не сможет отправлять электронные письма с приглашением в команду пользователям Вашего приложения.")])]),t._v(" "),a("h2",{attrs:{id:"роли-разрешения"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#роли-разрешения"}},[t._v("#")]),t._v(" Роли / Разрешения")]),t._v(" "),a("p",[t._v("Каждому члену команды, добавленному в команду, может быть назначена определенная роль, и каждой роли назначается набор разрешений. Разрешения ролей определяются в классе Вашего приложения "),a("code",[t._v("App\\Providers\\JetstreamServiceProvider")]),t._v(" с помощью метода "),a("code",[t._v("Jetstream::role")]),t._v(". тот метод принимает «слаг» для роли, удобное для пользователя имя роли, разрешения роли и описание роли. Эта информация будет использоваться для отображения роли в представлении управления членами группы.")]),t._v(" "),a("p",[t._v("Например, представьте, что мы создаем приложение для управления сервером, такое как "),a("a",{attrs:{href:"https://forge.laravel.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Forge"),a("OutboundLink")],1),t._v(". Мы могли бы определить командные роли нашего приложения следующим образом:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[t._v("Jetstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defaultApiTokenPermissions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'read'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nJetstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("role")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Administrator'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:create'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:read'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:update'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:delete'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Administrator users can perform any action.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nJetstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("role")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'support'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Support Specialist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:read'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Support specialists can read server information.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Поддержка API Команды")]),t._v(" "),a("p",[t._v("Когда Jetstream устанавливается с поддержкой команды, доступные разрешения API автоматически выводятся путем объединения всех уникальных разрешений, доступных для ролей. Следовательно, отдельный вызов метода "),a("code",[t._v("Jetstream::permissions")]),t._v(" не требуется.")])]),t._v(" "),a("h3",{attrs:{id:"авторизация"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#авторизация"}},[t._v("#")]),t._v(" Авторизация")]),t._v(" "),a("p",[t._v("Конечно, Вам понадобится способ авторизации того, что входящие запросы, инициированные членом команды, могут действительно выполняться этим пользователем. Разрешения группы пользователя могут быть проверены с помощью метода "),a("code",[t._v("hasTeamPermission")]),t._v(", доступного через трейт "),a("code",[t._v("Laravel\\Jetstream\\HasTeams")]),t._v(".")]),t._v(" "),a("p",[a("strong",[t._v("Обычно нет необходимости проверять роль пользователя. Вам нужно только проверить, есть ли у пользователя конкретное разрешение.")]),t._v(" Роли - это просто презентационная концепция, используемая для группировки гранулярных разрешений. Обычно вызовы этого метода выполняются в "),a("a",{attrs:{href:"https://getlaravel.ru/docs/authorization",target:"_blank",rel:"noopener noreferrer"}},[t._v("политиках авторизации"),a("OutboundLink")],1),t._v(" приложения:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTeamPermission")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$server")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:update'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenCan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:update'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"объединение-разрешении-группы-с-разрешениями-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#объединение-разрешении-группы-с-разрешениями-api"}},[t._v("#")]),t._v(" Объединение разрешений группы с разрешениями API")]),t._v(" "),a("p",[t._v("При создании приложения Jetstream, которое обеспечивает как поддержку API, так и поддержку команды, Вы должны проверить разрешения команды "),a("strong",[t._v("и")]),t._v(" разрешения токена API входящего запроса в политиках авторизации вашего приложения. Это важно, потому что токен API может иметь теоретическую способность выполнять действие, в то время как пользователю фактически не предоставлено это действие через разрешения своей команды:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Определите, может ли пользователь обновлять полет.\n *\n * @param  \\App\\Models\\User  $user\n * @param  \\App\\Models\\Flight  $flight\n * @return bool\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Flight "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$flight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("belongsToTeam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$flight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTeamPermission")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$flight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'flight:view'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenCan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'flight:view'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);