(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{319:function(t,s,a){t.exports=a.p+"assets/img/login.6dbbf666.png"},366:function(t,s,a){"use strict";a.r(s);var n=a(40),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"аутентификация"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#аутентификация"}},[t._v("#")]),t._v(" Аутентификация")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#вступление"}},[t._v("Вступление")])]),n("li",[n("a",{attrs:{href:"#laravel-fortify"}},[t._v("Laravel Fortify")])]),n("li",[n("a",{attrs:{href:"#представления-страницы"}},[t._v("Представления / Страницы")]),n("ul",[n("li",[n("a",{attrs:{href:"#настроика-представлении-аутентификации"}},[t._v("Настройка представлений аутентификации")])])])]),n("li",[n("a",{attrs:{href:"#настроика-процесса-аутентификации"}},[t._v("Настройка процесса аутентификации")]),n("ul",[n("li",[n("a",{attrs:{href:"#настроика-аутентификации-пользователя"}},[t._v("Настройка аутентификации пользователя")])]),n("li",[n("a",{attrs:{href:"#настроика-конвеиера-аутентификации"}},[t._v("Настройка конвейера аутентификации")])])])]),n("li",[n("a",{attrs:{href:"#восстановление-пароля"}},[t._v("Восстановление пароля")]),n("ul",[n("li",[n("a",{attrs:{href:"#экшены"}},[t._v("Экшены")])]),n("li",[n("a",{attrs:{href:"#представления-страницы"}},[t._v("Представления / Страницы")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"вступление"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#вступление"}},[t._v("#")]),t._v(" Вступление")]),t._v(" "),n("p",[t._v("Laravel Jetstream автоматически формирует логин, двухфакторный вход, регистрацию, сброс пароля и проверку электронной почты для Вашего проекта, позволяя Вам начать создавать функции, которые Вам нужны, вместо того, чтобы беспокоиться о мельчайших деталях аутентификации пользователя.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(319),alt:"Скриншот аутентификации"}})]),t._v(" "),n("h2",{attrs:{id:"laravel-fortify"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#laravel-fortify"}},[t._v("#")]),t._v(" Laravel Fortify")]),t._v(" "),n("p",[t._v("Под капотом аутентификационные части Jetstream работают на "),n("a",{attrs:{href:"https://github.com/laravel/fortify",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Fortify"),n("OutboundLink")],1),t._v(", который является независимой от внешнего интерфейса серверной частью аутентификации для Laravel. По сути, Fortify определяет маршруты и контроллеры для реализации функций аутентификации приложения, в то время как пользовательский интерфейс Jetstream выполняет запросы к этим маршрутам.")]),t._v(" "),n("p",[t._v("При установке Jetstream в Ваше приложение устанавливается файл конфигурации "),n("code",[t._v("config/fortify.php")]),t._v(". В этом файле конфигурации Вы можете настроить различные аспекты поведения Fortify, такие как средство защиты аутентификации, которое следует использовать, куда следует перенаправлять пользователей после аутентификации и многое другое.")]),t._v(" "),n("p",[t._v("В файле конфигурации "),n("code",[t._v("fortify")]),t._v(" Вы также можете отключить все функции Fortify, такие как возможность обновления информации профиля или паролей.")]),t._v(" "),n("h2",{attrs:{id:"представления-страницы"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#представления-страницы"}},[t._v("#")]),t._v(" Представления / Страницы")]),t._v(" "),n("p",[t._v("При использовании стека Livewire окно входа в систему отображается с использованием шаблона Blade "),n("code",[t._v("resources/views/auth/login.blade.php")]),t._v(". При использовании стека Inertia это представление отображается с использованием шаблона "),n("code",[t._v("resources/js/Pages/Auth/Login.vue")]),t._v(". Каталоги, содержащие эти представления, также содержат другие представления / страницы, связанные с аутентификацией для Вашего приложения.")]),t._v(" "),n("h3",{attrs:{id:"настроика-представлении-аутентификации"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#настроика-представлении-аутентификации"}},[t._v("#")]),t._v(" Настройка представлений аутентификации")]),t._v(" "),n("p",[t._v("Laravel Jetstream автоматически отобразит правильные представления для входа в Ваше приложение и других экранов аутентификации. Однако иногда может потребоваться настроить способ визуализации определенного представления аутентификации или данных, получаемых представлением.")]),t._v(" "),n("p",[t._v("Вся логика визуализации представления аутентификации может быть настроена с использованием соответствующих методов, доступных через класс "),n("code",[t._v("Laravel\\Fortify\\Fortify")]),t._v(". Как правило, этот метод следует вызывать из метода "),n("code",[t._v("boot")]),t._v(" класса "),n("code",[t._v("App\\Providers\\JetstreamServiceProvider")]),t._v(":")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Загрузка любых сервисов приложений.\n *\n * @return void\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("boot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("loginView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("view")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'auth.login'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"настроика-представлении-инерционнои-аутентификации"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#настроика-представлении-инерционнои-аутентификации"}},[t._v("#")]),t._v(" Настройка представлений инерционной аутентификации")]),t._v(" "),n("p",[t._v("Если Ваше приложение использует стек Inertia, Вы можете вернуть страницы Inertia из Ваших замыканий настройки представления:")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Support"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Facades"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Route")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Inertia"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Inertia")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nFortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("loginView")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Inertia"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Auth/Login'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'canResetPassword'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Route"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("has")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'password.request'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'status'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("session")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'status'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"настроика-процесса-аутентификации"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#настроика-процесса-аутентификации"}},[t._v("#")]),t._v(" Настройка процесса аутентификации")]),t._v(" "),n("h3",{attrs:{id:"настроика-аутентификации-пользователя"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#настроика-аутентификации-пользователя"}},[t._v("#")]),t._v(" Настройка аутентификации пользователя")]),t._v(" "),n("p",[t._v("Иногда Вам может потребоваться полная настройка того, как аутентифицируются учетные данные пользователя и как пользователи извлекаются из базы данных Вашего приложения. К счастью, Jetstream позволяет легко сделать это с помощью метода "),n("code",[t._v("Fortify::authenticateUsing")]),t._v(".")]),t._v(" "),n("p",[t._v("Метод "),n("code",[t._v("authenticateUsing")]),t._v(" принимает замыкание, которое получает входящий HTTP-запрос. Замыкание отвечает за проверку учетных данных для входа, прикрепленных к запросу, и за возврат связанного экземпляра пользователя. Если учетные данные недействительны или пользователь не может быть найден, замыкание должно вернуть "),n("code",[t._v("null")]),t._v(" или "),n("code",[t._v("false")]),t._v(". Обычно этот метод следует вызывать из метода "),n("code",[t._v("boot")]),t._v(" Вашего "),n("code",[t._v("JetstreamServiceProvider")]),t._v(":")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("User")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Support"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Facades"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Hash")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Загрузка любых сервисов приложений.\n *\n * @return void\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("boot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n    Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticateUsing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Request "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" User"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'email'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("email")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n            Hash"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("check")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v('Если Вы предпочитаете инкапсулировать свой собственный процесс аутентификации в классе, а не в замыкании, Вы можете передать "вызываемый" массив PHP методу '),n("code",[t._v("authenticateUsing")]),t._v(":")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AuthenticateLoginAttempt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nFortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticateUsing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticateLoginAttempt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'__invoke'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"настроика-конвеиера-аутентификации"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#настроика-конвеиера-аутентификации"}},[t._v("#")]),t._v(" Настройка конвейера аутентификации")]),t._v(" "),n("p",[t._v("Laravel Fortify, которая является базовой библиотекой аутентификации Jetstream, аутентифицирует запросы на вход через конвейер вызываемых классов.")]),t._v(" "),n("p",[t._v("При желании Вы можете определить настраиваемый конвейер классов, через которые должны передаваться запросы на вход. Каждый класс должен иметь метод "),n("code",[t._v("__invoke")]),t._v(", который получает входящий экземпляр "),n("code",[t._v("Illuminate\\Http\\Request")]),t._v(" и, как мидлвар, переменную "),n("code",[t._v("$next")]),t._v(", которая вызывается для передачи запроса следующему классу в конвейере.")]),t._v(" "),n("p",[t._v("Чтобы определить свой собственный конвейер, Вы можете использовать метод "),n("code",[t._v("Fortify::authenticateThrough")]),t._v(". Этот метод принимает замыкание, которое должно возвращать массив классов для передачи запроса входа в систему. Обычно этот метод следует вызывать из метода "),n("code",[t._v("boot")]),t._v(" Вашего класса "),n("code",[t._v("App\\Providers\\JetstreamServiceProvider")]),t._v(".")]),t._v(" "),n("p",[t._v("В приведенном ниже примере содержится определение конвейера по умолчанию, которое Вы можете использовать в качестве отправной точки при внесении собственных изменений:")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AttemptToAuthenticate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("EnsureLoginIsNotThrottled")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PrepareAuthenticatedSession")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("RedirectIfTwoFactorAuthenticatable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nFortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticateThrough")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Request "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("array_filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'fortify.limiters.login'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" EnsureLoginIsNotThrottled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            RedirectIfTwoFactorAuthenticatable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            AttemptToAuthenticate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            PrepareAuthenticatedSession"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"восстановление-пароля"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#восстановление-пароля"}},[t._v("#")]),t._v(" Восстановление пароля")]),t._v(" "),n("p",[t._v("В дополнение к шаблонам представлений и действий, связанных с входом в систему / аутентификацией, Jetstream также формирует ресурсы, необходимые пользователю для сброса своего пароля в случае его забывания. Конечно, эта функция использует базовые "),n("a",{attrs:{href:"https://getlaravel.ru/docs/passwords",target:"_blank",rel:"noopener noreferrer"}},[t._v("функции сброса пароля"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("Laravel Mail")]),t._v(" "),n("p",[t._v("Перед использованием функции сброса пароля Вы должны убедиться, что Ваше приложение Laravel настроено на "),n("a",{attrs:{href:"https://getlaravel.ru/docs/mail",target:"_blank",rel:"noopener noreferrer"}},[t._v("отправку электронных писем"),n("OutboundLink")],1),t._v(". В противном случае Laravel не сможет отправлять ссылки для сброса пароля пользователям Вашего приложения.")])]),t._v(" "),n("h3",{attrs:{id:"экшены"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#экшены"}},[t._v("#")]),t._v(" Экшены")]),t._v(" "),n("p",[t._v("Как типично для большинства функций Jetstream, логику, выполняемую для удовлетворения запросов на сброс пароля, можно найти в классе действий в Вашем приложении. Помните, что действия - это гранулярные классы, которые отвечают за выполнение одной задачи, связанной с функцией Jetstream или Fortify.")]),t._v(" "),n("p",[t._v("В частности, класс "),n("code",[t._v("App\\Actions\\Fortify\\ResetUserPassword")]),t._v(" будет вызываться, когда пользователь сбрасывает свой пароль. Это действие отвечает за проверку нового пароля пользователя и обновление пароля в экземпляре пользователя. Следовательно, любые настройки, которые Вы хотите внести в логику сброса пароля пользователя, должны выполняться в этом классе. Действие получает массив "),n("code",[t._v("$input")]),t._v(", который содержит все входные данные входящего запроса.")]),t._v(" "),n("h4",{attrs:{id:"правила-проверки-пароля"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#правила-проверки-пароля"}},[t._v("#")]),t._v(" Правила проверки пароля")]),t._v(" "),n("p",[t._v("Действия "),n("code",[t._v("App\\Actions\\Fortify\\CreateNewUser")]),t._v(", "),n("code",[t._v("App\\Actions\\Fortify\\ResetUserPassword")]),t._v(" и "),n("code",[t._v("App\\Actions\\Fortify\\UpdateUserPassword")]),t._v(" используют трейт "),n("code",[t._v("App\\Actions\\Fortify\\PasswordValidationRules")]),t._v(".")]),t._v(" "),n("p",[t._v("Как Вы могли заметить, трейт "),n("code",[t._v("App\\Actions\\Fortify\\PasswordValidationRules")]),t._v(" использует настраиваемый объект правила проверки "),n("code",[t._v("Laravel\\Fortify\\Rules\\Password")]),t._v(". Этот объект позволяет Вам легко настроить требования к паролю для Вашего приложения. По умолчанию для правила требуется пароль длиной не менее восьми символов. Однако Вы можете использовать следующие методы для настройки требований к паролю:")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fortify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Rules"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Требуется не менее 10 символов...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Требуется хотя бы один символ верхнего регистра...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requireUppercase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Требуется хотя бы один числовой символ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requireNumeric")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Требуется хотя бы один специальный символ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requireSpecialCharacter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("Конечно, эти методы можно объединить в цепочку, чтобы определить правила проверки пароля для Вашего приложения:")]),t._v(" "),n("div",{staticClass:"language-php extra-class"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Password")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requireSpecialCharacter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"представления-страницы-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#представления-страницы-2"}},[t._v("#")]),t._v(" Представления / Страницы")]),t._v(" "),n("p",[t._v("Функция сброса пароля Jetstream реализована с использованием двух экранов: экрана, на котором пользователь может запросить ссылку для сброса пароля, и экрана, который фактически позволяет пользователю сбросить свой пароль.")]),t._v(" "),n("h4",{attrs:{id:"запрос-ссылки-для-сброса-пароля"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#запрос-ссылки-для-сброса-пароля"}},[t._v("#")]),t._v(" Запрос ссылки для сброса пароля")]),t._v(" "),n("p",[t._v("При использовании стека Livewire окно запроса ссылки для сброса пароля отображается с использованием шаблона Blade "),n("code",[t._v("resources/views/auth/forgot-password.blade.php")]),t._v(". При использовании стека Inertia это представление отображается с использованием шаблона "),n("code",[t._v("resources/js/Pages/Auth/ForgotPassword.vue")]),t._v(".")]),t._v(" "),n("h4",{attrs:{id:"сброс-пароля"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#сброс-пароля"}},[t._v("#")]),t._v(" Сброс пароля")]),t._v(" "),n("p",[t._v("При использовании стека Livewire окно сброса пароля отображается с использованием шаблона Blade "),n("code",[t._v("resources/views/auth/reset-password.blade.php")]),t._v(". При использовании стека Inertia это представление отображается с использованием шаблона "),n("code",[t._v("resources/js/Pages/Auth/ResetPassword.vue")]),t._v(".")])])}),[],!1,null,null,null);s.default=e.exports}}]);