(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{357:function(t,s,a){t.exports=a.p+"assets/img/teams.613e2f04.png"},390:function(t,s,a){"use strict";a.r(s);var e=a(40),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"команды"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#команды"}},[t._v("#")]),t._v(" Команды")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#введение"}},[t._v("Введение")])]),e("li",[e("a",{attrs:{href:"#создание-команды"}},[t._v("Создание команды")]),e("ul",[e("li",[e("a",{attrs:{href:"#деиствия"}},[t._v("Действия")])]),e("li",[e("a",{attrs:{href:"#представления-страницы"}},[t._v("Представления / Страницы")])])])]),e("li",[e("a",{attrs:{href:"#проверка-пользовательских-команд"}},[t._v("Проверка пользовательских команд")]),e("ul",[e("li",[e("a",{attrs:{href:"#текущая-команда"}},[t._v("Текущая команда")])]),e("li",[e("a",{attrs:{href:"#командныи-объект"}},[t._v("Командный объект")])])])]),e("li",[e("a",{attrs:{href:"#управление-участниками"}},[t._v("Управление участниками")]),e("ul",[e("li",[e("a",{attrs:{href:"#деиствия-управления-участниками"}},[t._v("Действия управления участниками")])]),e("li",[e("a",{attrs:{href:"#представления-страницы-управления-участниками"}},[t._v("Представления / Страницы управления участниками")])]),e("li",[e("a",{attrs:{href:"#приглашения"}},[t._v("Приглашения")])])])]),e("li",[e("a",{attrs:{href:"#роли-разрешения"}},[t._v("Роли / Разрешения")]),e("ul",[e("li",[e("a",{attrs:{href:"#авторизация"}},[t._v("Авторизация")])]),e("li",[e("a",{attrs:{href:"#объединение-разрешении-команды-с-разрешениями-api"}},[t._v("Объединение разрешений команды с разрешениями API")])])])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"введение"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#введение"}},[t._v("#")]),t._v(" Введение")]),t._v(" "),e("p",[t._v("Если Вы установили Jetstream использую опцию "),e("code",[t._v("--teams")]),t._v(", Ваше приложение будет построено для поддержки создания команды и управления ею.")]),t._v(" "),e("p",[t._v("Командные функции Jetstream позволяют каждому зарегистрированному пользователю создавать несколько команд и входить в них. По умолчанию каждый зарегистрированный пользователь будет входить в «Персональную» команду. Например, если пользователь с именем «Салли Джонс» создает новую учетную запись, он будет назначен в команду с именем «Команда Салли». После регистрации пользователь может переименовать эту команду или создать дополнительные команды.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(357),alt:"Скриншот команд Laravel"}})]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Команды Jetstream")]),t._v(" "),e("p",[t._v("Стуктура и мнения команды Jetstream могут работать не для всех приложений. Если это не работает для Вашего варианта использования, не стесняйтесь создавать приложение Jetstream, не основанное на команде, и вручную добавлять функциональные возможности команды в свое приложение на основе Ваших собственных потребностей.")])]),t._v(" "),e("h2",{attrs:{id:"создание-команды"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#создание-команды"}},[t._v("#")]),t._v(" Создание команды")]),t._v(" "),e("p",[t._v("Доступ к представлению создания команды осуществляется через раскрывающееся меню навигации пользователя в правом верхнем углу.")]),t._v(" "),e("h3",{attrs:{id:"деиствия"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#деиствия"}},[t._v("#")]),t._v(" Действия")]),t._v(" "),e("p",[t._v("Как и многие другие функции Jetstream, логику создания и удаления команды можно настроить, изменив соответствующие классы действий в каталоге "),e("code",[t._v("app/Actions/Jetstream")]),t._v(". Эти действия включают "),e("code",[t._v("CreateTeam")]),t._v(", "),e("code",[t._v("UpdateTeamName")]),t._v(" и "),e("code",[t._v("DeleteTeam")]),t._v(". Каждое из этих действий вызывается, когда соответствующая задача выполняется пользователем в пользовательском интерфейсе приложения. Вы можете изменять эти действия по мере необходимости в зависимости от потребностей Вашего приложения.")]),t._v(" "),e("h3",{attrs:{id:"представления-страницы"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#представления-страницы"}},[t._v("#")]),t._v(" Представления / Страницы")]),t._v(" "),e("p",[t._v("При использовании стека Livewire представление создания команды отображается с использованием шаблона Blade "),e("code",[t._v("resources/views/teams/create-team-form.blade.php")]),t._v(". При использовании стека Inertia это представление отображается с использованием шаблона "),e("code",[t._v("resources/js/Pages/Teams/CreateTeamForm.vue")]),t._v(". Дополнительные поля ввода, указанные в формах создания команды, будут предоставлены классу действия "),e("code",[t._v("App\\Actions\\Jetstream\\CreateTeam")]),t._v(", когда пользователь создаст команду.")]),t._v(" "),e("h2",{attrs:{id:"проверка-пользовательских-команд"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#проверка-пользовательских-команд"}},[t._v("#")]),t._v(" Проверка пользовательских команд")]),t._v(" "),e("p",[t._v("Доступ к информации о командах пользователя можно получить с помощью методов, предоставляемых трейтом "),e("code",[t._v("Laravel\\Jetstream\\HasTeams")]),t._v(". Этот трейт автоматически применяется к модели Вашего приложения "),e("code",[t._v("App\\Models\\User")]),t._v(" во время установки Jetstream. Этот трейт предоставляет множество полезных методов, которые позволяют Вам проверять команды пользователя:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ к выбранной в данный момент команде пользователя...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("currentTeam")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Laravel\\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Jetstream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Team")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ ко всем командам (включая собственные), к которым принадлежит пользователь...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("allTeams")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Support"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ ко всем командам пользователя...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("ownedTeams")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Database"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Eloquent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ ко всем командам, к которым пользователь принадлежит, но не принадлежит...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("teams")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Database"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Eloquent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Доступ к "личной" команде пользователя...')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("personalTeam")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Laravel\\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Jetstream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Team")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определите, владеет ли пользователь данной командой...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ownsTeam")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определите, принадлежит ли пользователь к данной команде...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("belongsToTeam")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Получить роль, назначенную пользователю в команде...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("teamRole")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Jetstream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Role")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определите, имеет ли пользователь данную роль в данной команде...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTeamRole")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'admin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ к массиву всех разрешений, которые пользователь имеет для данной команды...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("teamPermissions")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определите, есть ли у пользователя данное командное разрешение...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTeamPermission")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:create'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n")])])]),e("h3",{attrs:{id:"текущая-команда"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#текущая-команда"}},[t._v("#")]),t._v(" Текущая команда")]),t._v(" "),e("p",[t._v("У каждого пользователя в приложении Jetstream есть «текущая команда». Это команда, для которой пользователь активно просматривает ресурсы. Например, если Вы создаете приложение-календарь, Ваше приложение будет отображать предстоящие события календаря для текущей команды пользователя.")]),t._v(" "),e("p",[t._v("Вы можете получить доступ к текущей команде пользователя, используя отношение Eloquent "),e("code",[t._v("$user->currentTeam")]),t._v(". Это отношение может использоваться для определения области других Ваших запросов Eloquent текущей командой пользователя:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Calendar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Calendar"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'team_id'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("currentTeam")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("id")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Смена команд")]),t._v(" "),e("p",[t._v("Пользователь может переключить свою текущую команду с помощью меню «переключателя команды», доступного на панели навигации Jetstream.")])]),t._v(" "),e("h3",{attrs:{id:"командныи-объект"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#командныи-объект"}},[t._v("#")]),t._v(" Командный объект")]),t._v(" "),e("p",[t._v("Объект команды, доступ к которому осуществляется через "),e("code",[t._v("$user->currentTeam")]),t._v(" или другие запросы Eloquent, связанные с командой Jetstream, предоставляет множество полезных методов для проверки атрибутов и отношений команды:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Доступ к владельцу команды...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("owner")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" App\\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("User")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Получить всех пользователей команды, включая владельца...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("allUsers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Database"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Eloquent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Получить всех пользователей команды, кроме владельца...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("users")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Illuminate\\"),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Database"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Eloquent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Collection")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определите, является ли данный пользователь членом команды...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasUser")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определите, есть ли в команде участник с данным адресом электронной почты...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasUserWithEmail")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$emailAddress")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Определите, является ли данный пользователь членом команды с данным разрешением...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$team")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("userHasPermission")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$permission")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bool\n")])])]),e("h2",{attrs:{id:"управление-участниками"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#управление-участниками"}},[t._v("#")]),t._v(" Управление участниками")]),t._v(" "),e("p",[t._v("Члены команды могут быть добавлены и удалены из команды через представление «Настройки команды» Jetstream. По умолчанию только владельцы команды могут управлять членством в команде. Это ограничение определяется в классе "),e("code",[t._v("App\\Policies\\TeamPolicy")]),t._v(". Естественно, Вы можете изменить эту политику по своему усмотрению.")]),t._v(" "),e("h3",{attrs:{id:"деиствия-управления-участниками"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#деиствия-управления-участниками"}},[t._v("#")]),t._v(" Действия управления участниками")]),t._v(" "),e("p",[t._v("Подобно процессу настройки других функций Jetstream, логика добавления членов команды может быть настроена путем изменения класса действия "),e("code",[t._v("App\\Actions\\Jetstream\\AddTeamMember")]),t._v(". Метод класса "),e("code",[t._v("add")]),t._v(" вызывается с текущим аутентифицированным пользователем, экземпляром "),e("code",[t._v("Laravel\\Jetstream\\Team")]),t._v(", адресом электронной почты пользователя, добавляемого в команду, и ролью (если применимо) пользователя, добавляемого в команду.")]),t._v(" "),e("p",[t._v("Это действие отвечает за проверку того, что пользователь действительно может быть добавлен в команду, а затем за добавление пользователя в команду. Вы можете настроить это действие в соответствии с потребностями Вашего конкретного приложения.")]),t._v(" "),e("p",[t._v("Удаление члена команды можно настроить, изменив класс действия "),e("code",[t._v("App\\Actions\\Jetstream\\RemoveTeamMember")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"представления-страницы-управления-участниками"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#представления-страницы-управления-участниками"}},[t._v("#")]),t._v(" Представления / Страницы управления участниками")]),t._v(" "),e("p",[t._v("При использовании стека Livewire представление менеджера членов команды отображается с использованием шаблона Blade "),e("code",[t._v("resources/views/teams/team-member-manager.blade.php")]),t._v(". При использовании стека Inertia это представление отображается с использованием шаблона "),e("code",[t._v("resources/js/Pages/Teams/TeamMemberManager.vue")]),t._v(". Как правило, эти шаблоны не требуют настройки.")]),t._v(" "),e("h3",{attrs:{id:"приглашения"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#приглашения"}},[t._v("#")]),t._v(" Приглашения")]),t._v(" "),e("p",[t._v("По умолчанию Jetstream просто добавит любого существующего пользователя приложения, указанного Вами, в Вашу команду. Однако многие приложения отправляют приглашения по электронной почте пользователям, приглашенным в команды. Если у пользователя нет учетной записи, электронное письмо с приглашением может предложить ему создать учетную запись и принять приглашение. Или, если у пользователя уже есть учетная запись, он может принять или проигнорировать приглашение.")]),t._v(" "),e("p",[t._v("К счастью, Jetstream позволяет включать приглашения членов команды для Вашего приложения с помощью всего нескольких строк кода. Для начала передайте опцию "),e("code",[t._v("invitations")]),t._v(" при включении функции «команды» для Вашего приложения. Это можно сделать, изменив массив "),e("code",[t._v("features")]),t._v(" в файле конфигурации "),e("code",[t._v("config/jetstream.php")]),t._v(" Вашего приложения:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Jetstream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Features")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'features'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    Features"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("termsAndPrivacyPolicy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Features"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("profilePhotos")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Features"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Features"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("teams")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'invitations'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Features"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("accountDeletion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),e("p",[t._v("После того, как Вы включите функцию приглашений Jetstream, пользователи, приглашенные в команды, получат электронное письмо с приглашением со ссылкой для принятия приглашения в команду. Пользователи не будут полноправными членами команды, пока приглашение не будет принято.")]),t._v(" "),e("h4",{attrs:{id:"деиствия-с-приглашением"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#деиствия-с-приглашением"}},[t._v("#")]),t._v(" Действия с приглашением")]),t._v(" "),e("p",[t._v("Когда пользователя приглашают в команду, действие Вашего приложения "),e("code",[t._v("App\\Actions\\Jetstream\\InviteTeamMember")]),t._v(" будет вызываться с текущим аутентифицированным пользователем, командой, в которую приглашен новый пользователь, адресом электронной почты приглашенного пользователя и, необязательно, роль, которая должна быть назначена пользователю после того, как он присоединится к команде. Вы можете просмотреть это действие или изменить его в зависимости от потребностей Вашего собственного приложения.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Laravel Mail")]),t._v(" "),e("p",[t._v("Перед использованием функции приглашения в команду Вы должны убедиться, что Ваше приложение Laravel настроено на "),e("a",{attrs:{href:"https://getlaravel.ru/docs/mail",target:"_blank",rel:"noopener noreferrer"}},[t._v("отправку электронных писем"),e("OutboundLink")],1),t._v(". В противном случае Laravel не сможет отправлять электронные письма с приглашением в команду пользователям Вашего приложения.")])]),t._v(" "),e("h2",{attrs:{id:"роли-разрешения"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#роли-разрешения"}},[t._v("#")]),t._v(" Роли / Разрешения")]),t._v(" "),e("p",[t._v("Каждому члену команды, добавленному в команду, может быть назначена определенная роль, и каждой роли назначается набор разрешений. Разрешения ролей определяются в классе Вашего приложения "),e("code",[t._v("App\\Providers\\JetstreamServiceProvider")]),t._v(" с помощью метода "),e("code",[t._v("Jetstream::role")]),t._v(". Этот метод принимает «слаг» для роли, удобное для пользователя имя роли, разрешения роли и описание роли. Эта информация будет использоваться для отображения роли в представлении управления членами команды.")]),t._v(" "),e("p",[t._v("Например, представьте, что мы создаем приложение для управления сервером, такое как "),e("a",{attrs:{href:"https://forge.laravel.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Forge"),e("OutboundLink")],1),t._v(". Мы могли бы определить командные роли нашего приложения следующим образом:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[t._v("Jetstream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defaultApiTokenPermissions")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'read'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nJetstream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("role")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'admin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Administrator'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:create'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:read'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:update'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:delete'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Пользователи-администраторы могут выполнять любые действия.'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nJetstream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("role")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'support'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Support Specialist'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:read'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Специалисты службы поддержки могут читать информацию о сервере.'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Поддержка API команды")]),t._v(" "),e("p",[t._v("Когда Jetstream устанавливается с поддержкой команды, доступные разрешения API автоматически выводятся путем объединения всех уникальных разрешений, доступных для ролей. Следовательно, отдельный вызов метода "),e("code",[t._v("Jetstream::permissions")]),t._v(".")])]),t._v(" "),e("h3",{attrs:{id:"авторизация"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#авторизация"}},[t._v("#")]),t._v(" Авторизация")]),t._v(" "),e("p",[t._v("Конечно, Вам понадобится способ авторизации того, что входящие запросы, инициированные членом команды, могут действительно выполняться этим пользователем. Разрешения команды пользователя могут быть проверены с помощью метода "),e("code",[t._v("hasTeamPermission")]),t._v(", доступного через трейт "),e("code",[t._v("Laravel\\Jetstream\\HasTeams")]),t._v(".")]),t._v(" "),e("p",[e("strong",[t._v("Обычно нет необходимости проверять роль пользователя. Вам нужно только проверить, есть ли у пользователя конкретное разрешение.")]),t._v(" Роли - это просто презентационная концепция, используемая для группировки гранулярных разрешений. Обычно вызовы этого метода выполняются в "),e("a",{attrs:{href:"https://getlaravel.ru/docs/authorization",target:"_blank",rel:"noopener noreferrer"}},[t._v("политиках авторизации"),e("OutboundLink")],1),t._v(" приложения:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTeamPermission")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$server")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'server:update'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"объединение-разрешении-команды-с-разрешениями-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#объединение-разрешении-команды-с-разрешениями-api"}},[t._v("#")]),t._v(" Объединение разрешений команды с разрешениями API")]),t._v(" "),e("p",[t._v("При создании приложения Jetstream, которое обеспечивает как поддержку API, так и поддержку команды, Вы должны проверить разрешения команды "),e("strong",[t._v("и")]),t._v(" разрешения токена API входящего запроса в рамках политик авторизации Вашего приложения. Это важно, потому что токен API может иметь теоретическую способность выполнять действие, в то время как пользователю фактически не предоставлено это действие через разрешения его команды:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Определите, может ли пользователь обновлять полет.\n *\n * @param  \\App\\Models\\User  $user\n * @param  \\App\\Models\\Flight  $flight\n * @return bool\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("view")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Flight "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$flight")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("belongsToTeam")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$flight")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n           "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTeamPermission")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$flight")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("team")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'flight:view'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n           "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenCan")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'flight:view'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);