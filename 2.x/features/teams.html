<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Teams | Laravel Jetstream</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,800,800i,900,900i" rel="stylesheet" type="text/css">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png?v=00aYpBgAp5">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png?v=00aYpBgAp5">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png?v=00aYpBgAp5">
    <link rel="shortcut icon" href="/assets/img/favicon.ico?v=00aYpBgAp5">
    <meta name="description" content="Красиво оформленный каркас приложений для Laravel">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/assets/css/0.styles.408a0e15.css" as="style"><link rel="preload" href="/assets/js/app.35125ebd.js" as="script"><link rel="preload" href="/assets/js/2.d76ec8bd.js" as="script"><link rel="preload" href="/assets/js/20.81cb1602.js" as="script"><link rel="prefetch" href="/assets/js/10.95dd530a.js"><link rel="prefetch" href="/assets/js/11.e33c6435.js"><link rel="prefetch" href="/assets/js/12.8fdf7f4a.js"><link rel="prefetch" href="/assets/js/13.d2261467.js"><link rel="prefetch" href="/assets/js/14.dfc49aa1.js"><link rel="prefetch" href="/assets/js/15.132a2d6c.js"><link rel="prefetch" href="/assets/js/16.bc516004.js"><link rel="prefetch" href="/assets/js/17.e62a7647.js"><link rel="prefetch" href="/assets/js/18.4d856637.js"><link rel="prefetch" href="/assets/js/19.bbb062ae.js"><link rel="prefetch" href="/assets/js/21.f6c8567b.js"><link rel="prefetch" href="/assets/js/22.501acb73.js"><link rel="prefetch" href="/assets/js/23.d3e266df.js"><link rel="prefetch" href="/assets/js/24.61ea1235.js"><link rel="prefetch" href="/assets/js/25.21696d26.js"><link rel="prefetch" href="/assets/js/26.6ec687e5.js"><link rel="prefetch" href="/assets/js/27.1aca54d2.js"><link rel="prefetch" href="/assets/js/28.72ad139f.js"><link rel="prefetch" href="/assets/js/29.a0b59c2a.js"><link rel="prefetch" href="/assets/js/3.e7e4b4a5.js"><link rel="prefetch" href="/assets/js/30.73aa0dbe.js"><link rel="prefetch" href="/assets/js/31.d65d18c2.js"><link rel="prefetch" href="/assets/js/32.1542b715.js"><link rel="prefetch" href="/assets/js/33.94c7dcc9.js"><link rel="prefetch" href="/assets/js/34.d690b0e8.js"><link rel="prefetch" href="/assets/js/35.31752920.js"><link rel="prefetch" href="/assets/js/36.9ef35e3e.js"><link rel="prefetch" href="/assets/js/37.ee2ee5bd.js"><link rel="prefetch" href="/assets/js/38.ac5418ec.js"><link rel="prefetch" href="/assets/js/39.ac29f78e.js"><link rel="prefetch" href="/assets/js/4.06846390.js"><link rel="prefetch" href="/assets/js/40.12279338.js"><link rel="prefetch" href="/assets/js/41.21f08b21.js"><link rel="prefetch" href="/assets/js/42.aea6e88f.js"><link rel="prefetch" href="/assets/js/43.75b4f9d6.js"><link rel="prefetch" href="/assets/js/5.9920dd6c.js"><link rel="prefetch" href="/assets/js/6.abdcff70.js"><link rel="prefetch" href="/assets/js/7.e2c28faa.js"><link rel="prefetch" href="/assets/js/8.46093f26.js"><link rel="prefetch" href="/assets/js/9.379c5989.js">
    <link rel="stylesheet" href="/assets/css/0.styles.408a0e15.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.svg" alt="Laravel Jetstream" class="logo"> <span class="site-name can-hide">Laravel Jetstream</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Главная
</a></div> <a href="https://github.com/laravel/jetstream" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Главная
</a></div> <a href="https://github.com/laravel/jetstream" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="teams"><a href="#teams" class="header-anchor">#</a> Teams</h1> <p></p><div class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#team-creation">Team Creation</a><ul><li><a href="#actions">Actions</a></li><li><a href="#представления-страницы">Представления / Страницы</a></li></ul></li><li><a href="#inspecting-user-teams">Inspecting User Teams</a><ul><li><a href="#the-current-team">The Current Team</a></li><li><a href="#the-team-object">The Team Object</a></li></ul></li><li><a href="#member-management">Member Management</a><ul><li><a href="#member-management-actions">Member Management Actions</a></li><li><a href="#member-management-представления-страницы">Member Management Представления / Страницы</a></li><li><a href="#invitations">Invitations</a></li></ul></li><li><a href="#roles-permissions">Roles / Permissions</a><ul><li><a href="#authorization">Authorization</a></li><li><a href="#combining-team-permissions-with-api-permissions">Combining Team Permissions With API Permissions</a></li></ul></li></ul></div><p></p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>If you installed Jetstream using the <code>--teams</code> option, your application will be scaffolded to support team creation and management.</p> <p>Jetstream's team features allow each registered user to create and belong to multiple teams. By default, every registered user will belong to a &quot;Personal&quot; team. For example, if a user named &quot;Sally Jones&quot; creates a new account, they will be assigned to a team named &quot;Sally's Team&quot;. After registration, the user may rename this team or create additional teams.</p> <p><img src="/assets/img/teams.613e2f04.png" alt="Screenshot of Laravel Teams"></p> <div class="custom-block warning"><p class="custom-block-title">Jetstream Teams</p> <p>Jetstream's team scaffolding and opinions may not work for every application. If it doesn't work for your use case, feel free to create a non-team based Jetstream application and manually add team functionality to your application based on your own needs.</p></div> <h2 id="team-creation"><a href="#team-creation" class="header-anchor">#</a> Team Creation</h2> <p>The team creation view is accessed via the top-right user navigation dropdown menu.</p> <h3 id="actions"><a href="#actions" class="header-anchor">#</a> Actions</h3> <p>Like many other Jetstream features, team creation and deletion logic may be customized by modifying the relevant action classes within your <code>app/Actions/Jetstream</code> directory. These actions include <code>CreateTeam</code>, <code>UpdateTeamName</code>, and <code>DeleteTeam</code>. Each of these actions is invoked when their corresponding task is performed by the user in the application's UI. You are free to modify these actions as required based on your application's needs.</p> <h3 id="представления-страницы"><a href="#представления-страницы" class="header-anchor">#</a> Представления / Страницы</h3> <p>When using the Livewire stack, the team creation view is displayed using the <code>resources/views/teams/create-team-form.blade.php</code> Blade template. When using the Inertia stack, this view is displayed using the <code>resources/js/Pages/Teams/CreateTeamForm.vue</code> template. Additional input fields that are specified on the team creation forms will be provided to the <code>App\Actions\Jetstream\CreateTeam</code> action class when the user creates a team.</p> <h2 id="inspecting-user-teams"><a href="#inspecting-user-teams" class="header-anchor">#</a> Inspecting User Teams</h2> <p>Information about a user's teams may be accessed via the methods provided by the <code>Laravel\Jetstream\HasTeams</code> trait. This trait is automatically applied to your application's <code>App\Models\User</code> model during Jetstream's installation. This trait provides a variety of helpful methods that allow you to inspect a user's teams:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Access a user's currently selected team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">currentTeam</span> <span class="token punctuation">:</span> Laravel\<span class="token package">Jetstream<span class="token punctuation">\</span>Team</span>

<span class="token comment">// Access all of the team's (including owned teams) that a user belongs to...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allTeams</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> Illuminate\<span class="token package">Support<span class="token punctuation">\</span>Collection</span>

<span class="token comment">// Access all of a user's owned teams...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">ownedTeams</span> <span class="token punctuation">:</span> Illuminate\<span class="token package">Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Collection</span>

<span class="token comment">// Access all of the teams that a user belongs to but does not own...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">teams</span> <span class="token punctuation">:</span> Illuminate\<span class="token package">Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Collection</span>

<span class="token comment">// Access a user's &quot;personal&quot; team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">personalTeam</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> Laravel\<span class="token package">Jetstream<span class="token punctuation">\</span>Team</span>

<span class="token comment">// Determine if a user owns a given team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ownsTeam</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool

<span class="token comment">// Determine if a user belongs to a given team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToTeam</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool

<span class="token comment">// Get the role that the user is assigned on the team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">teamRole</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> \<span class="token package">Laravel<span class="token punctuation">\</span>Jetstream<span class="token punctuation">\</span>Role</span>

<span class="token comment">// Determine if the user has the given role on the given team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasTeamRole</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'admin'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool

<span class="token comment">// Access an array of all permissions a user has for a given team...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">teamPermissions</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">array</span>

<span class="token comment">// Determine if a user has a given team permission...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasTeamPermission</span><span class="token punctuation">(</span><span class="token variable">$team</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'server:create'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool
</code></pre></div><h3 id="the-current-team"><a href="#the-current-team" class="header-anchor">#</a> The Current Team</h3> <p>Every user within a Jetstream application has a &quot;current team&quot;. This is the team that the user is actively viewing resources for. For example, if you are building a calendar application, your application would display the upcoming calendar events for the user's current team.</p> <p>You may access the user's current team using the <code>$user-&gt;currentTeam</code> Eloquent relationship. This relationship may be used to scope your other Eloquent queries by the user's current team:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Calendar</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> Calendar<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'team_id'</span><span class="token punctuation">,</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">currentTeam</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span>
<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Switching Teams</p> <p>A user may switch their current team via the &quot;team switcher&quot; menu available within the Jetstream navigation bar.</p></div> <h3 id="the-team-object"><a href="#the-team-object" class="header-anchor">#</a> The Team Object</h3> <p>The team object that is accessed via <code>$user-&gt;currentTeam</code> or Jetstream's other team related Eloquent queries provides a variety of useful methods for inspecting the team's attributes and relationships:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Access the team's owner...</span>
<span class="token variable">$team</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">owner</span> <span class="token punctuation">:</span> App\<span class="token package">Models<span class="token punctuation">\</span>User</span>

<span class="token comment">// Get all of the team's users, including the owner...</span>
<span class="token variable">$team</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> Illuminate\<span class="token package">Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Collection</span>

<span class="token comment">// Get all of the team's users, excluding the owner...</span>
<span class="token variable">$team</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">users</span> <span class="token punctuation">:</span> Illuminate\<span class="token package">Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Collection</span>

<span class="token comment">// Determine if the given user is a team member...</span>
<span class="token variable">$team</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasUser</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool

<span class="token comment">// Determine if the team has a member with the given email address...</span>
<span class="token variable">$team</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasUserWithEmail</span><span class="token punctuation">(</span><span class="token variable">$emailAddress</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool

<span class="token comment">// Determine if the given user is a team member with the given permission...</span>
<span class="token variable">$team</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">userHasPermission</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$permission</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> bool
</code></pre></div><h2 id="member-management"><a href="#member-management" class="header-anchor">#</a> Member Management</h2> <p>Team members may be added and removed from a team via Jetstream's &quot;Team Settings&quot; view.</p> <h3 id="member-management-actions"><a href="#member-management-actions" class="header-anchor">#</a> Member Management Actions</h3> <p>Like the customization process for other Jetstream features, team member addition logic may be customized by modifying the <code>App\Actions\Jetstream\AddTeamMember</code> action class. The class' <code>add</code> method is invoked with the currently authenticated user, the <code>Laravel\Jetstream\Team</code> instance, the email address of the user being added to the team, and the role (if applicable) of the user being added to the team.</p> <p>This action is responsible for validating that the user can actually be added to the team and then adding the user to the team. You are free to customize this action based on the needs of your particular application.</p> <p>Team member removal may be customized by modifying the <code>App\Actions\Jetstream\RemoveTeamMember</code> action class.</p> <h3 id="member-management-представления-страницы"><a href="#member-management-представления-страницы" class="header-anchor">#</a> Member Management Представления / Страницы</h3> <p>When using the Livewire stack, the team member manager view is displayed using the <code>resources/views/teams/team-member-manager.blade.php</code> Blade template. When using the Inertia stack, this view is displayed using the <code>resources/js/Pages/Teams/TeamMemberManager.vue</code> template. Generally, these templates should not require customization.</p> <h3 id="invitations"><a href="#invitations" class="header-anchor">#</a> Invitations</h3> <p>By default, Jetstream will simply add any existing application user that you specify to your team. However, many applications choose to send invitation emails to users that are invited to teams. If the user does not have an account, the invitation email can instruct them to create an account and accept the invitation. Or, if the user already has an account, they can accept or ignore the invitation.</p> <p>Thankfully, Jetstream allows you to enable team member invitations for your application with just a few lines of code. To get started, pass the <code>invitations</code> option when enabling the &quot;teams&quot; feature for your application. This may be done by modifying the <code>features</code> array of your application's <code>config/jetstream.php</code> configuration file:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Jetstream<span class="token punctuation">\</span>Features</span><span class="token punctuation">;</span>

<span class="token single-quoted-string string">'features'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    Features<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">termsAndPrivacyPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Features<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">profilePhotos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Features<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">api</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Features<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">teams</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'invitations'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Features<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accountDeletion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Once you have enabled Jetstream's invitations feature, users that are invited to teams will receive an invitation email with a link to accept the team invitation. Users will not be full members of the team until the invitation is accepted.</p> <h4 id="invitation-actions"><a href="#invitation-actions" class="header-anchor">#</a> Invitation Actions</h4> <p>When a user is invited to the team, your application's <code>App\Actions\Jetstream\InviteTeamMember</code> action will be invoked with the currently authenticated user, the team that the new user is invited to, the email address of the invited user, and, optionally, the role that should be assigned to the user once they join the team. You are free to review this action or modify it based on the needs of your own application.</p> <div class="custom-block tip"><p class="custom-block-title">Laravel Mail</p> <p>Before using the team invitation feature, you should ensure that your Laravel application is configured to <a href="https://laravel.com/docs/mail" target="_blank" rel="noopener noreferrer">send emails<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Otherwise, Laravel will be unable to send team invitation emails to your application's users.</p></div> <h2 id="roles-permissions"><a href="#roles-permissions" class="header-anchor">#</a> Roles / Permissions</h2> <p>Each team member added to a team may be assigned a given role, and each role is assigned a set of permissions. Role permissions are defined in your application's <code>App\Providers\JetstreamServiceProvider</code> class using the <code>Jetstream::role</code> method. This method accepts a &quot;slug&quot; for the role, a user-friendly role name, the role permissions, and a description of the role. This information will be used to display the role within the team member management view.</p> <p>For example, imagine we are building a server management application such as <a href="https://forge.laravel.com" target="_blank" rel="noopener noreferrer">Laravel Forge<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. We might define our application's team roles like so:</p> <div class="language-php extra-class"><pre class="language-php"><code>Jetstream<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">defaultApiTokenPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'read'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Jetstream<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">role</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Administrator'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'server:create'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'server:read'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'server:update'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'server:delete'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Administrator users can perform any action.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Jetstream<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">role</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'support'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Support Specialist'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'server:read'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Support specialists can read server information.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Team API Support</p> <p>When Jetstream is installed with team support, available API permissions are automatically derived by combining all unique permissions available to roles. Therefore, a separate call to the <code>Jetstream::permissions</code> method is unnecessary.</p></div> <h3 id="authorization"><a href="#authorization" class="header-anchor">#</a> Authorization</h3> <p>Of course, you will need a way to authorize that incoming requests initiated by a team member may actually be performed by that user. A user's team permissions may be inspected using the <code>hasTeamPermission</code> method available via the <code>Laravel\Jetstream\HasTeams</code> trait.</p> <p><strong>There is typically not a need to inspect a user's role. You only need to inspect that the user has a given granular permission.</strong> Roles are simply a presentational concept used to group granular permissions. Typically, you will execute calls to this method within your application's <a href="https://laravel.com/docs/authorization" target="_blank" rel="noopener noreferrer">authorization policies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasTeamPermission</span><span class="token punctuation">(</span><span class="token variable">$server</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">team</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'server:update'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
       <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tokenCan</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'server:update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="combining-team-permissions-with-api-permissions"><a href="#combining-team-permissions-with-api-permissions" class="header-anchor">#</a> Combining Team Permissions With API Permissions</h3> <p>When building a Jetstream application that provides both API support and team support, you should verify an incoming request's team permissions <strong>and</strong> API token permissions within your application's authorization policies. This is important because an API token may have the theoretical ability to perform an action while a user does not actually have that action granted to them via their team permissions:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Determine whether the user can update a flight.
 *
 * @param  \App\Models\User  $user
 * @param  \App\Models\Flight  $flight
 * @return bool
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">view</span><span class="token punctuation">(</span>User <span class="token variable">$user</span><span class="token punctuation">,</span> Flight <span class="token variable">$flight</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToTeam</span><span class="token punctuation">(</span><span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">team</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
           <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasTeamPermission</span><span class="token punctuation">(</span><span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">team</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'flight:view'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
           <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tokenCan</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'flight:view'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/laravel-ru/jetstream-docs/edit/main-ru/2.x/features/teams.md" target="_blank" rel="noopener noreferrer">Помогите нам улучшить эту страницу!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.35125ebd.js" defer></script><script src="/assets/js/2.d76ec8bd.js" defer></script><script src="/assets/js/20.81cb1602.js" defer></script>
  </body>
</html>
