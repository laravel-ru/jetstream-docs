# Двухфакторная аутентификация

[[toc]]

## Введение

Laravel Jetstream автоматически поддерживает двухфакторную аутентификацию для всех приложений Jetstream. Пользователь получает доступ к функциям безопасности Laravel Jetstream с помощью раскрывающегося меню навигации профиля пользователя в правом верхнем углу. На этой панели инструментов Jetstream формирует представления, которые позволяют пользователю включать и управлять двухфакторной аутентификацией для своей учетной записи.

**Когда пользователь включает двухфакторную аутентификацию для своей учетной записи, он должен сканировать данный QR-код с помощью бесплатного приложения для аутентификации TOTP, такого как Google Authenticator. Кроме того, они должны хранить перечисленные коды восстановления в безопасном диспетчере паролей, таком как [1Password](https://1password.com).**

Если пользователь теряет доступ к своему мобильному устройству, страница входа в Jetstream позволит ему аутентифицироваться с использованием одного из своих кодов восстановления вместо временного токена, предоставленного приложением аутентификатора их мобильного устройства.

![Скриншот безопасности](./../../assets/img/security.png)

## Действия

Большинство функций Jetstream можно настроить с помощью классов действий. Однако в целях безопасности службы двухфакторной аутентификации Jetstream инкапсулированы в Jetstream и не требуют настройки.

## Представления / Страницы

Как правило, соответствующие представления и страницы функции двухфакторной аутентификации не требуют настройки, поскольку они уже являются полнофункциональными. Однако их расположение описано ниже на тот случай, если Вам потребуется внести небольшие изменения в презентацию этих страниц.

При использовании стека Livewire представление управления двухфакторной аутентификацией отображается с использованием блейд-шаблона `resources/views/profile/two-factor-authentication-form.blade.php`. При использовании стека Inertia это представление отображается с использованием шаблона `resources/js/Pages/Profile/TwoFactorAuthenticationForm.vue`.

## Отключение двухфакторной аутентификации

При желании Вы можете отключить поддержку двухфакторной аутентификации, удалив эту функцию из массива `features` конфигурационного файла Вашего приложения `config/fortify.php`:

```php
use Laravel\Fortify\Features;

'features' => [
    Features::registration(),
    Features::resetPasswords(),
     Features::emailVerification(),
    Features::updateProfileInformation(),
    Features::updatePasswords(),
    // Features::twoFactorAuthentication([
    //     'confirmPassword' => true,
    // ]),
],
```
