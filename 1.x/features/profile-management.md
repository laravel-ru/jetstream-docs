# Управление профилем

[[toc]]

## Вступление

Доступ к функциям управления профилями Laravel Jetstream осуществляется пользователем с помощью раскрывающегося меню навигации профиля пользователя в правом верхнем углу. Jetstream формирует представления и действия, которые позволяют пользователю обновлять свое имя, адрес электронной почты и, при необходимости, фотографию своего профиля.

![Снимок экрана управления профилем](./../../assets/img/profile-management.png)

## Представления / Страницы

При использовании стека Livewire это представление отображается с использованием блейд-шаблона `resources/views/profile/update-profile-information-form.blade.php`. При использовании стека Inertia это представление отображается с использованием шаблона `resources/js/Pages/Profile/UpdateProfileInformationForm.vue`.

Каждый из этих шаблонов получит весь объект аутентифицированного пользователя, так что Вы можете добавить дополнительные поля в эти формы по мере необходимости. Любые дополнительные входные данные, добавленные к формам, будут включены в массив `$input`, который передается Вашему действию `UpdateUserProfileInformation`.

## Действия

Как типично для большинства функций Jetstream, логику, выполняемую для удовлетворения запросов на обновление профиля, можно найти в классе действий в Вашем приложении. В частности, класс `App\Actions\Fortify\UpdateUserProfileInformation` будет вызываться, когда пользователь обновляет свой профиль. Это действие отвечает за проверку ввода и обновление информации профиля пользователя.

Следовательно, любые настройки, которые Вы хотите внести в эту логику, должны выполняться в этом классе. Действие получает аутентифицированный в данный момент `$user` и массив `$input`, который содержит все данные входящего запроса, включая обновленную фотографию профиля, если применимо.

## Фото профиля

### Включение фото профиля

Если Вы хотите разрешить пользователям загружать пользовательские фотографии профиля, Вы должны включить эту функцию в файле конфигурации `config/jetstream.php`. Чтобы включить эту функцию, просто раскомментируйте запись функции из элемента конфигурации `features` в этом файле:

```php
'features' => [
    Features::profilePhotos(),
    Features::api(),
    Features::teams(),
],
```

### Управление фотографиями профиля

По умолчанию Jetstream позволяет пользователям загружать собственные фотографии профиля. Эта функциональность поддерживается трейтом `Laravel\Jetstream\HasProfilePhoto`, который автоматически прикрепляется к Вашему классу `App\Models\User` во время установки Jetstream.

Эта черта содержит такие методы, как `updateProfilePhoto`, `getProfilePhotoUrlAttribute`, `defaultProfilePhotoUrl` и `profilePhotoDisk`, которые могут быть перезаписаны Вашим собственным классом `App\Models\User`, если Вам нужно настроить их поведение. Вам предлагается прочитать исходный код этого трейта, чтобы получить полное представление о функциях, которые он предоставляет Вашему приложению.

Метод `updateProfilePhoto` является основным методом, используемым для хранения фотографий профиля, и вызывается действием `UpdateUserProfileInformation`.

:::tip Laravel Vapor

По умолчанию диск `s3` будет использоваться автоматически, когда Ваше приложение запущено в [Laravel Vapor](https://vapor.laravel.com).
:::

## Удаление аккаунта

Экран управления профилем также включает панель действий, которая позволяет пользователю удалить свою учетную запись приложения. Когда пользователь решает удалить свою учетную запись, будет вызван класс действия `App\Actions\Jetstream\DeleteUser`. Вы можете настроить логику удаления учетной записи в этом классе.
