<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Безопасность | Laravel Jetstream</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,800,800i,900,900i" rel="stylesheet" type="text/css">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png?v=00aYpBgAp5">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png?v=00aYpBgAp5">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png?v=00aYpBgAp5">
    <link rel="shortcut icon" href="/assets/img/favicon.ico?v=00aYpBgAp5">
    <meta name="description" content="Красиво оформленный каркас приложений для Laravel">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/assets/css/0.styles.7a7950fa.css" as="style"><link rel="preload" href="/assets/js/app.e63a521e.js" as="script"><link rel="preload" href="/assets/js/2.149ce762.js" as="script"><link rel="preload" href="/assets/js/8.92f6fee0.js" as="script"><link rel="prefetch" href="/assets/js/10.e9563782.js"><link rel="prefetch" href="/assets/js/11.cf884f7d.js"><link rel="prefetch" href="/assets/js/12.1693666e.js"><link rel="prefetch" href="/assets/js/13.9c771140.js"><link rel="prefetch" href="/assets/js/14.89f7687e.js"><link rel="prefetch" href="/assets/js/15.bef4bd09.js"><link rel="prefetch" href="/assets/js/16.98e1c124.js"><link rel="prefetch" href="/assets/js/17.a838c02e.js"><link rel="prefetch" href="/assets/js/18.8278f08a.js"><link rel="prefetch" href="/assets/js/3.03ae1486.js"><link rel="prefetch" href="/assets/js/4.89cd2121.js"><link rel="prefetch" href="/assets/js/5.fd58e251.js"><link rel="prefetch" href="/assets/js/6.f348f44e.js"><link rel="prefetch" href="/assets/js/7.f45f49c4.js"><link rel="prefetch" href="/assets/js/9.b23c6dc0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7a7950fa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.svg" alt="Laravel Jetstream" class="logo"> <span class="site-name can-hide">Laravel Jetstream</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Главная
</a></div> <a href="https://github.com/laravel/jetstream" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Главная
</a></div> <a href="https://github.com/laravel/jetstream" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Начало</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1.x/introduction.html" class="sidebar-link">Вступление</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/introduction.html#laravel-jetstream" class="sidebar-link">Laravel Jetstream</a></li><li class="sidebar-sub-header"><a href="/1.x/introduction.html#доступные-стеки" class="sidebar-link">Доступные стеки</a></li></ul></li><li><a href="/1.x/installation.html" class="sidebar-link">Установка</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/installation.html#установка-jetstream" class="sidebar-link">Установка Jetstream</a></li><li class="sidebar-sub-header"><a href="/1.x/installation.html#структура-jetstream" class="sidebar-link">Структура Jetstream</a></li><li class="sidebar-sub-header"><a href="/1.x/installation.html#логотип-приложения" class="sidebar-link">Логотип приложения</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Функции</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1.x/features/authentication.html" class="sidebar-link">Аутентификация</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/features/authentication.html#вступление" class="sidebar-link">Вступление</a></li><li class="sidebar-sub-header"><a href="/1.x/features/authentication.html#laravel-fortify" class="sidebar-link">Laravel Fortify</a></li><li class="sidebar-sub-header"><a href="/1.x/features/authentication.html#представления" class="sidebar-link">Представления</a></li><li class="sidebar-sub-header"><a href="/1.x/features/authentication.html#деиствия" class="sidebar-link">Действия</a></li><li class="sidebar-sub-header"><a href="/1.x/features/authentication.html#настроика-процесса-аутентификации" class="sidebar-link">Настройка процесса аутентификации</a></li><li class="sidebar-sub-header"><a href="/1.x/features/authentication.html#подтверждение-по-элетроннои-почте" class="sidebar-link">Подтверждение по элетронной почте</a></li></ul></li><li><a href="/1.x/features/profile-management.html" class="sidebar-link">Управление профилем</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/features/profile-management.html#вступление" class="sidebar-link">Вступление</a></li><li class="sidebar-sub-header"><a href="/1.x/features/profile-management.html#представления-страницы" class="sidebar-link">Представления / Страницы</a></li><li class="sidebar-sub-header"><a href="/1.x/features/profile-management.html#деиствия" class="sidebar-link">Действия</a></li><li class="sidebar-sub-header"><a href="/1.x/features/profile-management.html#фото-профиля" class="sidebar-link">Фото профиля</a></li><li class="sidebar-sub-header"><a href="/1.x/features/profile-management.html#удаление-аккаунта" class="sidebar-link">Удаление аккаунта</a></li></ul></li><li><a href="/1.x/features/security.html" aria-current="page" class="active sidebar-link">Безопасность</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/features/security.html#вступление" class="sidebar-link">Вступление</a></li><li class="sidebar-sub-header"><a href="/1.x/features/security.html#представления-страницы" class="sidebar-link">Представления / Страницы</a></li><li class="sidebar-sub-header"><a href="/1.x/features/security.html#деиствия" class="sidebar-link">Действия</a></li><li class="sidebar-sub-header"><a href="/1.x/features/security.html#подтверждение-пароля" class="sidebar-link">Подтверждение пароля</a></li></ul></li><li><a href="/1.x/features/api.html" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/features/api.html#вступление" class="sidebar-link">Вступление</a></li><li class="sidebar-sub-header"><a href="/1.x/features/api.html#включение-поддержки-api" class="sidebar-link">Включение поддержки API</a></li><li class="sidebar-sub-header"><a href="/1.x/features/api.html#определение-разрешении" class="sidebar-link">Определение разрешений</a></li><li class="sidebar-sub-header"><a href="/1.x/features/api.html#авторизация-входящих-запросов" class="sidebar-link">Авторизация входящих запросов</a></li></ul></li><li><a href="/1.x/features/teams.html" class="sidebar-link">Команды</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/features/teams.html#вступление" class="sidebar-link">Вступление</a></li><li class="sidebar-sub-header"><a href="/1.x/features/teams.html#создание-удаление-команды" class="sidebar-link">Создание / удаление команды</a></li><li class="sidebar-sub-header"><a href="/1.x/features/teams.html#проверка-пользовательских-команд" class="sidebar-link">Проверка пользовательских команд</a></li><li class="sidebar-sub-header"><a href="/1.x/features/teams.html#управление-участниками" class="sidebar-link">Управление участниками</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Стеки</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1.x/stacks/livewire.html" class="sidebar-link">Livewire</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/stacks/livewire.html#вступление" class="sidebar-link">Вступление</a></li><li class="sidebar-sub-header"><a href="/1.x/stacks/livewire.html#компоненты" class="sidebar-link">Компоненты</a></li><li class="sidebar-sub-header"><a href="/1.x/stacks/livewire.html#модальные" class="sidebar-link">Модальные</a></li></ul></li><li><a href="/1.x/stacks/inertia.html" class="sidebar-link">Inertia</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/stacks/inertia.html#вступление" class="sidebar-link">Вступление</a></li><li class="sidebar-sub-header"><a href="/1.x/stacks/inertia.html#компоненты" class="sidebar-link">Компоненты</a></li><li class="sidebar-sub-header"><a href="/1.x/stacks/inertia.html#пользовательскии-рендеринг" class="sidebar-link">Пользовательский рендеринг</a></li><li class="sidebar-sub-header"><a href="/1.x/stacks/inertia.html#форма-помощники-с-валидациеи" class="sidebar-link">Форма / Помощники с валидацией</a></li><li class="sidebar-sub-header"><a href="/1.x/stacks/inertia.html#модальные" class="sidebar-link">Модальные</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="безопасность"><a href="#безопасность" class="header-anchor">#</a> Безопасность</h1> <p></p><div class="table-of-contents"><ul><li><a href="#вступление">Вступление</a><ul><li><a href="#двухфакторная-аутентификация">Двухфакторная аутентификация</a></li></ul></li><li><a href="#представления-страницы">Представления / Страницы</a><ul><li><a href="#обновление-пароля">Обновление пароля</a></li><li><a href="#двухфакторная-аутентификация">Двухфакторная аутентификация</a></li><li><a href="#сеансы-браузера">Сеансы браузера</a></li></ul></li><li><a href="#деиствия">Действия</a><ul><li><a href="#обновление-пароля">Обновление пароля</a></li><li><a href="#правила-проверки-пароля">Правила проверки пароля</a></li></ul></li><li><a href="#подтверждение-пароля">Подтверждение пароля</a><ul><li><a href="#livewire">Livewire</a></li><li><a href="#inertia">Inertia</a></li><li><a href="#настроика-способа-подтверждения-паролеи">Настройка способа подтверждения паролей</a></li></ul></li></ul></div><p></p> <h2 id="вступление"><a href="#вступление" class="header-anchor">#</a> Вступление</h2> <p>Доступ к функциям безопасности Laravel Jetstream осуществляется через раскрывающееся меню навигации профиля пользователя в правом верхнем углу. Jetstream формирует представления и действия, которые позволяют пользователю обновлять свой пароль, включать / отключать двухфакторную аутентификацию и выходить из других сеансов браузера.</p> <p><img src="/assets/img/security.1334d2b3.png" alt="Снимок экрана безопасности"></p> <h3 id="двухфакторная-аутентификация"><a href="#двухфакторная-аутентификация" class="header-anchor">#</a> Двухфакторная аутентификация</h3> <p>Laravel Jetstream автоматически поддерживает двухфакторную аутентификацию для всех приложений Jetstream. Когда пользователь включает двухфакторную аутентификацию для своей учетной записи, он должен сканировать данный QR-код с помощью бесплатного приложения для аутентификации, такого как Google Authenticator. Кроме того, они должны хранить перечисленные коды восстановления в безопасном менеджере паролей, таком как 1Password.</p> <p>Если пользователь теряет доступ к своему мобильному устройству, представление входа в систему Jetstream позволит ему аутентифицироваться с использованием одного из своих кодов восстановления вместо временного токена, предоставленного приложением аутентификатора их мобильного устройства.</p> <h2 id="представления-страницы"><a href="#представления-страницы" class="header-anchor">#</a> Представления / Страницы</h2> <p>Как правило, представления и страницы для этих функций не требуют настройки, поскольку они уже завершены. Однако их расположение описано ниже.</p> <h3 id="обновление-пароля"><a href="#обновление-пароля" class="header-anchor">#</a> Обновление пароля</h3> <p>При использовании стека Livewire представление обновления пароля отображается с использованием шаблона Blade <code>resources/views/profile/update-password-form.blade.php</code>. При использовании стека Inertia это представление отображается с использованием шаблона <code>resources/js/Pages/Profile/UpdatePasswordForm.vue</code>.</p> <h3 id="двухфакторная-аутентификация-2"><a href="#двухфакторная-аутентификация-2" class="header-anchor">#</a> Двухфакторная аутентификация</h3> <p>При использовании стека Livewire вид управления двухфакторной аутентификацией отображается с использованием блейд-шаблона <code>resources/views/profile/two-factor-authentication-form.blade.php</code>. При использовании стека Inertia это представление отображается с использованием шаблона <code>resources/js/Pages/Profile/TwoFactorAuthenticationForm.vue</code>.</p> <h3 id="сеансы-браузера"><a href="#сеансы-браузера" class="header-anchor">#</a> Сеансы браузера</h3> <p>При использовании стека Livewire представление управления сеансом браузера отображается с использованием шаблона Blade <code>resources/views/profile/logout-other-browser-sessions-form.blade.php</code>. При использовании стека Inertia это представление отображается с использованием шаблона <code>resources/js/Pages/Profile/LogoutOtherBrowserSessionsForm.vue</code>.</p> <p>Эта функция использует встроенное в Laravel промежуточное программное обеспечение <code>AuthenticateSession</code> для безопасного выхода из других сеансов браузера, которые аутентифицированы как текущий пользователь.</p> <h2 id="деиствия"><a href="#деиствия" class="header-anchor">#</a> Действия</h2> <p>Как типично для большинства функций Jetstream, логика, выполняемая для удовлетворения запросов, связанных с безопасностью, может быть найдена в классах действий в Вашем приложении. Однако настраивается только действие обновления пароля. Как правило, действия двухфакторной аутентификации и сеанса браузера должны оставаться инкапсулированными в Jetstream и не требовать настройки.</p> <h3 id="обновление-пароля-2"><a href="#обновление-пароля-2" class="header-anchor">#</a> Обновление пароля</h3> <p>Класс <code>App\Actions\Fortify\UpdateUserPassword</code> будет вызываться, когда пользователь обновит свой пароль. Это действие отвечает за проверку ввода и обновление пароля пользователя.</p> <p>Это действие использует трейт <code>App\Actions\Fortify\PasswordValidationRules</code> для определения правил проверки, которые будут применяться к паролю. Настройка этого свойства будет одинаково влиять на правила проверки, применяемые к паролю, когда пользователь регистрируется, сбрасывает свой пароль или обновляет свой пароль.</p> <h3 id="правила-проверки-пароля"><a href="#правила-проверки-пароля" class="header-anchor">#</a> Правила проверки пароля</h3> <p>Как Вы могли заметить, трейт <code>App\Actions\Fortify\PasswordValidationRules</code> использует настраиваемый объект правила проверки <code>Laravel\Fortify\Rules\Password</code>. Этот объект позволяет Вам легко настроить требования к паролю для Вашего приложения. По умолчанию для правила требуется пароль длиной не менее 8 символов. Однако Вы можете использовать следующие методы для настройки требований к паролю:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Password</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment">// Требуется хотя бы один символ верхнего регистра...</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Password</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">requireUppercase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Требуется хотя бы один числовой символ...</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Password</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">requireNumeric</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="подтверждение-пароля"><a href="#подтверждение-пароля" class="header-anchor">#</a> Подтверждение пароля</h2> <p>При создании приложения Вы можете иногда выполнять действия, требующие от пользователя подтверждения пароля перед выполнением действия. К счастью, в Jetstream есть встроенная функциональность, которая упрощает эту задачу.</p> <h3 id="livewire"><a href="#livewire" class="header-anchor">#</a> Livewire</h3> <p>Если Вы используете стек Livewire, Ваш компонент Livewire, содержащий действие с подтвержденным паролем, должен использовать трейт <code>Laravel\Jetstream\ConfirmsPasswords</code>. Затем Вы должны заключить действие, которое Вы хотите подтвердить, с помощью блейд-компонента <code>confirms-password</code>. Оболочка <code>confirms-password</code> должна содержать директиву <code>wire:then</code>, которая указывает, какое действие Livewire должно выполняться после подтверждения пароля пользователя. После того, как пользователь подтвердит свой пароль, ему не потребуется повторно вводить пароль до тех пор, пока не истечет количество секунд, определенное параметром конфигурации <code>auth.password_timeout</code>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-confirms-password</span> <span class="token attr-name"><span class="token namespace">wire:</span>then</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enableAdminMode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-jet-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wire:</span>loading.attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>disabled<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ __('Enable') }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-jet-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-jet-confirms-password</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Затем в рамках Вашего действия Livewire, которое подтверждается, Вы должны вызвать метод <code>ensurePasswordIsConfirmed</code>. Делать это нужно в самом начале соответствующего метода действий:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Включить режим администрирования для пользователя.
 *
 * @return void
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">enableAdminMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ensurePasswordIsConfirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="inertia"><a href="#inertia" class="header-anchor">#</a> Inertia</h3> <p>Если Вы используете стек Inertia, Вам следует обернуть действие, которое Вы хотите подтвердить, с помощью компонента Vue <code>ConfirmsPassword</code>, предоставляемого Jetstream. Этот компонент-оболочка должен прослушивать событие <code>@confirmed</code>, чтобы запустить метод, который должен вызываться после подтверждения пароля пользователя. После того, как пользователь подтвердит свой пароль, ему не потребуется повторно вводить пароль до тех пор, пока не истечет количество секунд, определенное параметром конфигурации <code>auth.password_timeout</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> JetConfirmsPassword <span class="token keyword">from</span> <span class="token string">'./Jetstream/ConfirmsPassword'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
        JetConfirmsPassword<span class="token punctuation">,</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Затем оберните компонент вокруг элемента, запускающего действие, которое необходимо подтвердить:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jet-confirms-password</span> <span class="token attr-name">@confirmed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enableAdminMode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jet-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ <span class="token punctuation">'</span>opacity-25<span class="token punctuation">'</span>: enabling }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enabling<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        Enable
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jet-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jet-confirms-password</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Наконец, Вы должны убедиться, что маршруту, который выполняет подтвержденное действие, назначено промежуточное программное обеспечение <code>password.confirm</code>. Это промежуточное ПО включено в стандартную установку Laravel:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/admin-mode'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'password.confirm'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="настроика-способа-подтверждения-паролеи"><a href="#настроика-способа-подтверждения-паролеи" class="header-anchor">#</a> Настройка способа подтверждения паролей</h3> <p>Иногда Вам может потребоваться настроить способ проверки пароля пользователя во время подтверждения. Для этого Вы можете использовать метод <code>Fortify::confirmPasswordsUsing</code>. Этот метод принимает Замыкание, которое получает аутентифицированный пользовательский экземпляр и входное значение запроса <code>password</code>. Замыкание должно вернуть <code>true</code>, если пароль действителен для данного пользователя. Обычно этот метод следует вызывать из метода <code>boot</code> Вашего <code>JetstreamServiceProvider</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Hash</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Fortify<span class="token punctuation">\</span>Fortify</span><span class="token punctuation">;</span>

Fortify<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">confirmPasswordsUsing</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> string <span class="token variable">$password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Hash<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token variable">$password</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">password</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/laravel-ru/jetstream-docs/edit/main-ru/1.x/features/security.md" target="_blank" rel="noopener noreferrer">Помогите нам улучшить эту страницу!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/1.x/features/profile-management.html" class="prev">
        Управление профилем
      </a></span> <span class="next"><a href="/1.x/features/api.html">
        API
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e63a521e.js" defer></script><script src="/assets/js/2.149ce762.js" defer></script><script src="/assets/js/8.92f6fee0.js" defer></script>
  </body>
</html>
